# =============================================================================
# iTech Backend - Development Environment Configuration
# =============================================================================
# This file contains development-specific configurations
# =============================================================================

# =============================================================================
# DATABASE CONFIGURATION - DEVELOPMENT
# =============================================================================
# MySQL Development Database
spring.datasource.url=jdbc:mysql://localhost:3306/itech_dev_db?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Kolkata&createDatabaseIfNotExist=true&autoReconnect=true&useUnicode=true&characterEncoding=UTF-8
spring.datasource.username=root
spring.datasource.password=root
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# MySQL is the primary database for development

# =============================================================================
# JPA & HIBERNATE CONFIGURATION - DEVELOPMENT
# =============================================================================
# Hibernate will auto-detect MySQL dialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
# Handle foreign key constraint issues more gracefully
spring.jpa.properties.hibernate.hbm2ddl.auto=update
spring.jpa.properties.hibernate.id.new_generator_mappings=false
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false

# Enable SQL logging for development
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# =============================================================================
# CONNECTION POOL CONFIGURATION - DEVELOPMENT
# =============================================================================
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.auto-commit=false
spring.datasource.hikari.pool-name=HikariPool-iTech-Dev

# =============================================================================
# CORS CONFIGURATION - DEVELOPMENT
# =============================================================================
spring.web.cors.allowed-origins=http://localhost:3000,http://localhost:3001,http://127.0.0.1:3000,http://127.0.0.1:3001,http://localhost:4200,http://127.0.0.1:4200
spring.web.cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS,HEAD
spring.web.cors.allowed-headers=*
spring.web.cors.allow-credentials=true
spring.web.cors.max-age=3600

# =============================================================================
# LOGGING CONFIGURATION - DEVELOPMENT
# =============================================================================
logging.level.com.itech.itech_backend=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.data.jpa=DEBUG
logging.level.root=INFO

# =============================================================================
# ACTUATOR CONFIGURATION - DEVELOPMENT
# =============================================================================
management.endpoints.web.exposure.include=*
management.endpoint.health.show-details=always
management.endpoint.shutdown.enabled=true

# =============================================================================
# SECURITY CONFIGURATION - DEVELOPMENT
# =============================================================================
spring.security.require-ssl=false
security.csrf.enabled=false

# =============================================================================
# FILE UPLOAD CONFIGURATION - DEVELOPMENT
# =============================================================================
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB
file.upload.directory=uploads/dev
file.upload.max-size=52428800

# =============================================================================
# JWT CONFIGURATION - DEVELOPMENT
# =============================================================================
jwt.secret=dev-secret-key-for-itech-backend-should-be-changed-in-production
jwt.expiration-in-ms=86400000
jwt.refresh-expiration-in-ms=604800000

# =============================================================================
# REDIS CONFIGURATION - DEVELOPMENT
# =============================================================================
spring.redis.host=localhost
spring.redis.port=6379
spring.redis.password=
spring.redis.timeout=2000ms

# =============================================================================
# EMAIL CONFIGURATION - DEVELOPMENT
# =============================================================================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=dev@itech.com
spring.mail.password=your-app-password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# =============================================================================
# EXTERNAL SERVICES - DEVELOPMENT (MOCK/TEST KEYS)
# =============================================================================
razorpay.key.id=rzp_test_1234567890
razorpay.key.secret=test_secret_key_1234567890
razorpay.webhook.secret=test_webhook_secret

# GST and PAN verification disabled in development
gst.verification.enabled=false
pan.verification.enabled=false

# SMS Configuration - Development
msg91.api.key=test-msg91-key
textlocal.api.key=test-textlocal-key
sms.provider.primary=MOCK

# =============================================================================
# PERFORMANCE CONFIGURATION - DEVELOPMENT
# =============================================================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Kolkata

# =============================================================================
# FLYWAY CONFIGURATION - DEVELOPMENT
# =============================================================================
# Enable Flyway but with relaxed validation for MySQL development environment
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.validate-on-migrate=false
spring.flyway.clean-disabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-version=0
spring.flyway.encoding=UTF-8
spring.flyway.connect-retries=10
spring.flyway.table=flyway_schema_history
# Skip validation for cross-database compatibility
spring.flyway.ignore-missing-migrations=true
spring.flyway.ignore-ignored-migrations=true
spring.flyway.ignore-future-migrations=true

# =============================================================================
# APPLICATION-SPECIFIC CONFIGURATION
# =============================================================================
app.default.currency=INR
app.default.country=India
app.default.timezone=Asia/Kolkata
app.session.timeout=7200
app.max.login.attempts=10
app.account.lockout.duration=300

# Development flags
app.enable.demo.data=true
app.enable.debug.endpoints=true
app.enable.swagger=true
